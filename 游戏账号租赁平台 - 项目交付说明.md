# 游戏账号租赁平台 - 项目交付说明

## 项目概述

本项目是一个功能完整的PC端游戏账号租赁系统，基于您提供的需求文档开发完成。系统采用HTML前端、Python Flask后端和SQLite数据库，实现了账号发布、租赁、搜索筛选、在线交易、资金管理等核心功能。

## 项目统计

- **代码总行数**: 3,337行
- **Python文件**: 13个
- **HTML文件**: 8个
- **CSS文件**: 1个
- **JavaScript文件**: 1个
- **数据库表**: 3个（用户、账号、订单）
- **API接口**: 20+个

## 已实现功能

### 1. 用户认证与管理
- ✅ 用户注册与登录
- ✅ 密码加密存储
- ✅ 会话管理
- ✅ 个人信息管理

### 2. 钱包系统
- ✅ 账户余额显示
- ✅ 在线充值功能
- ✅ 提现申请功能
- ✅ 余额不足校验（购买前检查）

### 3. 账号管理
- ✅ 发布账号信息
- ✅ 账号列表展示
- ✅ 账号详情查看
- ✅ 账号编辑与删除
- ✅ 账号状态管理（可租赁/已租出/不可用）

### 4. 高级搜索筛选
- ✅ 保险箱格数筛选（4/6/9格，可多选）
- ✅ 等级范围筛选（最小/最大等级）
- ✅ 区服模糊搜索
- ✅ 刀皮筛选（可多选）
- ✅ 资产范围筛选
- ✅ 多条件组合搜索
- ✅ 不填写的选项自动忽略

### 5. 订单系统
- ✅ 创建租赁订单
- ✅ 订单金额自动计算（纯币 × 100 ÷ 比例）
- ✅ 比例自动映射（9格=38，6格=40，4格=42）
- ✅ 在线支付功能
- ✅ 订单状态跟踪
- ✅ 订单完成功能
- ✅ 押金处理（一半退还租赁方，一半给管理员）

### 6. 数据约束
- ✅ 保险箱格数限制（仅4/6/9）
- ✅ 刀皮选项限制（北极星、黑海、赤霄怜悯、影锋、信条）
- ✅ 刀皮可多选
- ✅ 未填写的刀皮显示为空

### 7. 管理员功能
- ✅ 管理员账户独立金额
- ✅ 每笔订单押金抽成50%
- ✅ 管理员金额可增加

### 8. 其他功能
- ✅ 出币活动（抽奖系统）
- ✅ 经济学日报（跳转到 https://zxfps.com/）
- ✅ 个人中心
- ✅ 订单管理

## 技术实现细节

### 订单金额计算
```python
ratio_map = {9: 38, 6: 40, 4: 42}
ratio = ratio_map[safe_box_slots]
order_amount = pure_coin_assets * 100 / ratio
```

### 押金分配逻辑
- 租赁时：租赁方支付 `租金 + 全额押金`
- 支付时：
  - 租赁方余额减少 `总金额`
  - 出租方余额增加 `租金`
  - 管理员余额增加 `押金 × 50%`
- 完成时：
  - 租赁方余额增加 `押金 × 50%`
  - 账号状态恢复为"可租赁"

### 搜索筛选实现
系统支持以下筛选条件的任意组合：
- 保险箱格数（多选）
- 最小等级
- 最大等级
- 区服（模糊匹配）
- 刀皮（多选，满足任意一个即可）
- 最小资产
- 最大资产

用户可以只填写部分条件，未填写的条件将被忽略。

## 模拟数据

系统已预置以下测试数据：

### 用户账号
- **管理员**: admin / admin123
- **普通用户**: user001-user020 / 123456
- **用户总数**: 21个
- **初始余额**: 100-10000元随机

### 游戏账号
- **账号总数**: 50个
- **保险箱格数**: 4/6/9格随机分布
- **等级范围**: 20-100级
- **刀皮**: 0-5个随机组合
- **状态**: 部分可租赁，部分已租出

### 订单记录
- **订单总数**: 30个
- **状态**: 待支付/已支付/已完成随机分布
- **创建时间**: 最近30天内

## 访问信息

### 本地访问
- **地址**: http://localhost:5000
- **启动命令**: `python3 run.py`

### 在线演示
- **地址**: https://5000-iyf1cumtn5bju7mf0byg5-a9f5c14d.manus-asia.computer/
- **状态**: 已启动并运行

## 项目文件

### 核心文件
- `run.py` - 应用启动脚本
- `backend/app.py` - Flask应用主文件
- `backend/config.py` - 配置文件
- `generate_mock_data.py` - 模拟数据生成脚本

### 数据库模型
- `backend/models/user.py` - 用户模型
- `backend/models/account.py` - 账号模型
- `backend/models/order.py` - 订单模型

### API路由
- `backend/routes/auth.py` - 认证接口
- `backend/routes/user.py` - 用户接口
- `backend/routes/account.py` - 账号接口
- `backend/routes/order.py` - 订单接口

### 前端页面
- `frontend/templates/index.html` - 首页
- `frontend/templates/login.html` - 登录页
- `frontend/templates/register.html` - 注册页
- `frontend/templates/rental.html` - 租赁页
- `frontend/templates/publish.html` - 发布页
- `frontend/templates/profile.html` - 个人中心
- `frontend/templates/activity.html` - 活动页
- `frontend/templates/news.html` - 新闻页

### 文档
- `README.md` - 项目说明文档
- `DEPLOYMENT.md` - 部署指南
- `requirements.txt` - Python依赖清单

## 使用说明

### 快速开始

1. **启动应用**
   ```bash
   cd game_rental_platform
   python3 run.py
   ```

2. **访问系统**
   - 打开浏览器访问 http://localhost:5000

3. **登录测试**
   - 使用管理员账号：admin / admin123
   - 或使用普通用户：user001 / 123456

4. **功能测试**
   - 浏览账号列表
   - 使用筛选功能
   - 创建租赁订单
   - 充值和提现
   - 发布新账号

### 重新生成数据

如需重新生成模拟数据：
```bash
python3 generate_mock_data.py
```

注意：这将清空现有数据并重新生成。

## 注意事项

1. **数据库**: 当前使用SQLite，生产环境建议改用MySQL
2. **安全性**: 请在生产环境中修改SECRET_KEY
3. **性能**: 建议使用Gunicorn + Nginx部署
4. **备份**: 定期备份 `game_rental.db` 数据库文件

## 后续优化建议

1. **功能增强**
   - 添加即时通讯功能（租赁方与出租方对话）
   - 实现订单评价系统
   - 添加账号收藏功能
   - 实现消息通知系统

2. **性能优化**
   - 添加Redis缓存
   - 实现分页加载
   - 优化数据库查询

3. **安全加固**
   - 添加验证码功能
   - 实现API限流
   - 增强XSS防护

4. **用户体验**
   - 添加图片上传功能
   - 优化移动端适配
   - 增加数据可视化

## 交付清单

- ✅ 完整源代码
- ✅ 数据库文件（含模拟数据）
- ✅ 项目说明文档
- ✅ 部署指南
- ✅ API接口文档
- ✅ 测试账号信息
- ✅ 在线演示地址

## 技术支持

如有任何问题，请参考项目文档或联系开发团队。

---

**开发完成时间**: 2025年12月2日  
**开发者**: Manus AI  
**项目状态**: ✅ 已完成并测试通过
